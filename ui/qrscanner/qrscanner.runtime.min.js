$("body").append('<script type="text/javascript" src="../Common/extensions/QRScannerWidget/ui/qrscanner/jslibrary/qr-scanner.umd.min.js">\x3c/script>');
TW.Runtime.Widgets.qrscanner=function(){var b,c=this,d=(new Date).getTime()+"_"+Math.floor(1E3*Math.random());this.runtimeProperties=function(){return{needsDataLoadingAndError:!1,supportsAutoResize:!0}};this.renderHtml=function(){return'<div class="widget-content widget-qrscanner widget-qrscanner-'+d+'"><video id ="widget-qrscanner-video-'+d+'" style="width:100%;height:100%"></video></div>'};this.afterRender=function(){var a=c.getProperty("debugMode");QrScanner.hasCamera().then(b=>{a&&console.log("QR Scanner -> hasCamera = "+
b);c.setProperty("hasCamera",b)})};this.serviceInvoked=function(a){if("Scan"===a){var e=c.getProperty("debugMode");b||(b=new QrScanner(document.getElementById("widget-qrscanner-video-"+d),a=>{b.stop();e&&console.log("QR Scanner -> result = "+a);c.setProperty("content",a.data);c.jqElement.triggerHandler("Scanned")},{onDecodeError:a=>{a!==QrScanner.NO_QR_CODE_FOUND&&(e&&console.log("QR Scanner -> error = "+a),c.setProperty("error",a),c.jqElement.triggerHandler("Error"))},highlightScanRegion:!0,highlightCodeOutline:!0}));
b.start().then(()=>{},a=>{e&&console.log("QR Scanner -> error = "+a);c.setProperty("error",a);c.jqElement.triggerHandler("Error")})}else"Cancel"===a&&(b&&b.stop(),c.jqElement.triggerHandler("Cancelled"))};this.updateProperty=function(a){"debugMode"===a.TargetProperty&&this.setProperty(a.TargetProperty,a.RawSinglePropertyValue)};this.beforeDestroy=function(){try{console.log("QR Scanner -> destroy qrScanner"),TW.log.info("QR Scanner -> destroy qrScanner"),b&&(b.destroy(),b=null)}catch(a){TW.log.error("QR Scanner Before Destroy Error",
a)}}};