$("body").append('<script type="text/javascript" src="../Common/extensions/QRScannerWidget/ui/qrscanner/jslibrary/qr-scanner.umd.min.js">\x3c/script>');
TW.Runtime.Widgets.qrscanner=function(){var a,b=this,f=(new Date).getTime()+"_"+Math.floor(1E3*Math.random());this.runtimeProperties=function(){return{needsDataLoadingAndError:!1,supportsAutoResize:!0}};this.renderHtml=function(){return'<div class="widget-content widget-qrscanner widget-qrscanner-'+f+'"><video id ="widget-qrscanner-video-'+f+'" style="width:100%;height:100%"></video></div>'};this.afterRender=function(){var c=b.getProperty("debugMode");QrScanner._disableBarcodeDetector=!0;QrScanner.hasCamera().then(function(e){c&&
console.log("QR Scanner -> hasCamera = "+e);b.setProperty("hasCamera",e)})};this.serviceInvoked=function(c){QrScanner._disableBarcodeDetector=!0;if("Scan"===c){var e=b.getProperty("debugMode");a||(a=new QrScanner(document.getElementById("widget-qrscanner-video-"+f),function(d){a.stop();e&&console.log("QR Scanner -> result = "+d);b.setProperty("content",d.data);b.jqElement.triggerHandler("Scanned")},{onDecodeError:function(d){d!==QrScanner.NO_QR_CODE_FOUND&&(e&&console.log("QR Scanner -> error = "+
d),b.setProperty("error",d),b.jqElement.triggerHandler("Error"))},highlightScanRegion:!0,highlightCodeOutline:!0}));a.setInversionMode("both");a.start().then(function(){},function(d){e&&console.log("QR Scanner -> error = "+d);b.setProperty("error",d);b.jqElement.triggerHandler("Error")})}else"Cancel"===c&&(a&&a.stop(),b.jqElement.triggerHandler("Cancelled"))};this.updateProperty=function(c){"debugMode"===c.TargetProperty&&this.setProperty(c.TargetProperty,c.RawSinglePropertyValue)};this.beforeDestroy=
function(){try{console.log("QR Scanner -> destroy qrScanner"),TW.log.info("QR Scanner -> destroy qrScanner"),a&&(a.destroy(),a=null)}catch(c){TW.log.error("QR Scanner Before Destroy Error",c)}}};
